# ~/.bashrc: executed by bash(1) for non-login shells.
# see /usr/share/doc/bash/examples/startup-files (in the package bash-doc)
# for examples

# Enable basic colors in the terminal. OSX specific variable.
export CLICOLOR=1

# Grep search matches are now colored bright orange!
export GREP_OPTIONS='--color=auto'

# We install GNU coreutils via brew but only use
# two programs. dircolors and ls. Both are prefixed
# with a "g" so we must alias it back.
alias dircolors='gdircolors'
alias ls='gls -h --color=auto'
alias ll='gls -alFh --color=auto'
alias la='gls -Ah --color=auto'
alias l='gls -CFh --color=auto'

# Enable color support of ls and also add handy aliases
if [ -x /usr/local/bin/gdircolors ]; then
    test -r ~/.dircolors && eval "$(dircolors -b ~/.dircolors)" || eval "$(dircolors -b)"
fi

# Add an "alert" alias for long running commands.  Use like so:
#   sleep 10; alert
alias alert='notify-send --urgency=low -i "$([ $? = 0 ] && echo terminal || echo error)" "$(history|tail -n1|sed -e '\''s/^\s*[0-9]\+\s*//;s/[;&|]\s*alert$//'\'')"'

MITSUHIKOS_DEFAULT_COLOR="[00m"
MITSUHIKOS_GRAY_COLOR="[37m"
MITSUHIKOS_PINK_COLOR="[35m"
MITSUHIKOS_GREEN_COLOR="[32m"
MITSUHIKOS_ORANGE_COLOR="[33m"
MITSUHIKOS_RED_COLOR="[31m"
MITSUHIKOS_BLUE_COLOR="[36m"

if [ `id -u` == '0' ]; then
    MITSUHIKOS_USER_COLOR=$MITSUHIKOS_RED_COLOR
else
    MITSUHIKOS_USER_COLOR=$MITSUHIKOS_PINK_COLOR
fi

mitsuhikos_virtualenv() {
  if [ x$VIRTUAL_ENV != x ]; then
    if [[ $VIRTUAL_ENV == *.virtualenvs/* ]]; then
      ENV_NAME=`basename "${VIRTUAL_ENV}"`
    else
      folder=`dirname "${VIRTUAL_ENV}"`
      ENV_NAME=`basename "$folder"`
    fi
    echo -n $' \033[37mworkon \033[31m'
    echo -n $ENV_NAME
    echo -n $'\033[00m'
  fi
}

export MITSUHIKOS_BASEPROMPT='\n\e${MITSUHIKOS_USER_COLOR}\u\
\e${MITSUHIKOS_GRAY_COLOR} at \e${MITSUHIKOS_ORANGE_COLOR}\h \
\e${MITSUHIKOS_GRAY_COLOR}in \e${MITSUHIKOS_BLUE_COLOR}\W\
`mitsuhikos_virtualenv`\
\e${MITSUHIKOS_DEFAULT_COLOR}'

export PS1="\[\033[G\]${MITSUHIKOS_BASEPROMPT} $ ";

export PS1="\u@\h:\W $ "

# virtualenvwrapper and pip
if [ `id -u` != '0' ]; then
  export VIRTUALENV_DISTRIBUTE=1
  if [ -f /usr/local/bin/virtualenvwrapper.sh ]; then
    export WORKON_HOME=$HOME/.virtualenvs
    source /usr/local/bin/virtualenvwrapper.sh
  fi
fi

# don't let virtualenv show prompts by itself
# VIRTUAL_ENV_DISABLE_PROMPT=1

# export PS1='\u at \h in \W: '
